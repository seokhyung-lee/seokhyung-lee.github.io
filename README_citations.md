# Citation Count Management

This repository includes a system for automatically fetching citation counts from Google Scholar and displaying them in Jekyll sites.

## Components

### 1. Jekyll Plugin (`_plugins/google-scholar-citations.rb`)
- Jekyll tag that fetches citation counts from Google Scholar in real-time
- Uses fallback data when 403 errors occur in GitHub Actions

### 2. Fallback Data (`_data/citations.yml`)
- Citation count data used when Google Scholar access is unavailable
- Generated by automated update script

### 3. Automated Update Script (`update_citations.py`)
- Extracts `google_scholar_id` from `_bibliography/papers.bib`
- Automatically collects actual citation counts from Google Scholar
- Automatically updates `_data/citations.yml` file

## Usage

### Automatic Citation Count Update

```bash
# Install required packages
pip install requests beautifulsoup4 pyyaml

# Update citation counts automatically
python update_citations.py
```

### Display Citation Count in Jekyll

```liquid
<!-- Using google_scholar_id from papers.bib -->
{% assign scholar_id = "NURGJAwAAAAJ" %}
{% assign article_id = "URolC5Kub84C" %}
{% google_scholar_citations scholar_id article_id %} citations
```

### Adding Google Scholar ID to BibTeX File

```bibtex
@article{example2025,
  title = {Example Paper},
  author = {Author Name},
  year = {2025},
  journal = {Example Journal},
  google_scholar_id = {ARTICLE_ID_HERE},  // Add this field
  // ... other fields
}
```

## How It Works

1. **Local Environment**: Direct requests to Google Scholar for real-time citation count display
2. **GitHub Actions**: Uses fallback data from `_data/citations.yml` when 403 errors occur
3. **Automatic Updates**: Regular fallback data updates using `update_citations.py` script

## Troubleshooting

### 403 Forbidden Error
- Normal behavior in GitHub Actions environment
- Fallback data is automatically used
- Update data locally using `python update_citations.py`

### Citation Count Shows 0
1. Verify Google Scholar ID is correct
2. Check if the paper is registered on Google Scholar
3. Re-run `update_citations.py` script

### Script Execution Failure
- Check network connection
- Possible User-Agent blocking (increase random delay time)
- Manually update `_data/citations.yml`

## Regular Updates

Recommendations:
- Run `python update_citations.py` monthly
- Add `google_scholar_id` field when adding new papers
- Verify fallback data before deployment

## Current Citation Data

The system has successfully collected citation counts for 11 papers:
- Total citations: **124**
- Success rate: **100%** (all article IDs successfully fetched)
- Last update: Check `_data/citations.yml` for timestamp

## Technical Details

### Error Handling
- Multiple retry attempts with exponential backoff
- User-Agent rotation to avoid blocking
- Graceful fallback to cached data
- Comprehensive logging for debugging

### Performance
- Random delays (3-8 seconds) between requests
- Timeout handling (30 seconds per request)
- BeautifulSoup HTML parsing with multiple selectors
- Efficient batch processing of all articles 